<!DOCTYPE html>
<html>

<head>
    <title>Survey</title>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
    <!-- Compiled and minified CSS for Materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
    <!-- Compiled and minified JavaScript for Materialize-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
    <!-- Materialize Icons CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class='container'>
        <h3><strong>Survey</strong></h3>

        <h4><strong>About You</strong></h4>
        <h5>Name (Required)</h5>
        <input type="text" name="" id="name" class="form-control" required >
        <h5>Link to Photo Image (Required)</h5>
        <input type="text" name="" id="photo" class="form-control" required >
                    
        <h5><strong>Question 1</strong></h5>
        <h5>1) I am a very organized person.</h5>
        <input name="question1" type="radio" id="question1a" value="1" />
        <label for="question1a">Strongly Disagree</label>
        <input name="question1" type="radio" id="question1b" value="2" />
        <label for="question1b">Disagree</label>
        <input name="question1" type="radio" id="question1c" value="3" />
        <label for="question1c">Neutral</label>
        <input name="question1" type="radio" id="question1d" value="4" />
        <label for="question1d">Agree</label>
        <input name="question1" type="radio" id="question1e" value="5" />
        <label for="question1e">Strongly Agree</label>

        <br>
        <br>
           
        <h5><strong>Question 2</strong></h5>       
        <h5>2) I enjoy exercising.</h5>
        <input name="question2" type="radio" id="question2a" value="1" />
        <label for="question2a">Strongly Disagree</label>
        <input name="question2" type="radio" id="question2b" value="2" />
        <label for="question2b">Disagree</label>
        <input name="question2" type="radio" id="question2c" value="3" />
        <label for="question2c">Neutral</label>
        <input name="question2" type="radio" id="question2d" value="4" />
        <label for="question2d">Agree</label>
        <input name="question2" type="radio" id="question2e" value="5" />
        <label for="question2e">Strongly Agree</label>

        <br>
        <br>

        <h5><strong>Question 3</strong></h5>
        <h5>3) I am interested in art.</h5>
        <input name="question3" type="radio" id="question3a" value="1" />
        <label for="question3a">Strongly Disagree</label>
        <input name="question3" type="radio" id="question3b" value="2" />
        <label for="question3b">Disagree</label>
        <input name="question3" type="radio" id="question3c" value="3" />
        <label for="question3c">Neutral</label>
        <input name="question3" type="radio" id="question3d" value="4" />
        <label for="question3d">Agree</label>
        <input name="question3" type="radio" id="question3e" value="5" />
        <label for="question3e">Strongly Agree</label>

        <br>
        <br>

        <h5><strong>Question 4</strong></h5>
        <h5>4) My favorite genre of music is indie rock.</h5>
        <input name="question4" type="radio" id="question4a" value="1" />
        <label for="question4a">Strongly Disagree</label>
        <input name="question4" type="radio" id="question4b" value="2" />
        <label for="question4b">Disagree</label>
        <input name="question4" type="radio" id="question4c" value="3" />
        <label for="question4c">Neutral</label>
        <input name="question4" type="radio" id="question4d" value="4" />
        <label for="question4d">Agree</label>
        <input name="question4" type="radio" id="question4e" value="5" />
        <label for="question4e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 5</strong></h5>
        <h5>5) I put others first.</h5>
        <input name="question5" type="radio" id="question5a" value="1" />
        <label for="question5a">Strongly Disagree</label>
        <input name="question5" type="radio" id="question5b" value="2" />
        <label for="question5b">Disagree</label>
        <input name="question5" type="radio" id="question5c" value="3" />
        <label for="question5c">Neutral</label>
        <input name="question5" type="radio" id="question5d" value="4" />
        <label for="question5d">Agree</label>
        <input name="question5" type="radio" id="question5e" value="5" />
        <label for="question5e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 6</strong></h5>
        <h5>6) I readily admit when I'm wrong.</h5>
        <input name="question6" type="radio" id="question6a" value="1" />
        <label for="question6a">Strongly Disagree</label>
        <input name="question6" type="radio" id="question6b" value="2" />
        <label for="question6b">Disagree</label>
        <input name="question6" type="radio" id="question6c" value="3" />
        <label for="question6c">Neutral</label>
        <input name="question6" type="radio" id="question6d" value="4" />
        <label for="question6d">Agree</label>
        <input name="question6" type="radio" id="question6e" value="5" />
        <label for="question6e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 7</strong></h5>
        <h5>7) I am a hopeless romantic.</h5>
        <input name="question7" type="radio" id="question7a" value="1" />
        <label for="question7a">Strongly Disagree</label>
        <input name="question7" type="radio" id="question7b" value="2" />
        <label for="question7b">Disagree</label>
        <input name="question7" type="radio" id="question7c" value="3" />
        <label for="question7c">Neutral</label>
        <input name="question7" type="radio" id="question7d" value="4" />
        <label for="question7d">Agree</label>
        <input name="question7" type="radio" id="question7e" value="5" />
        <label for="question7e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 8</strong></h5>
        <h5>8) I think money is important.</h5>
        <input name="question8" type="radio" id="question8a" value="1" />
        <label for="question8a">Strongly Disagree</label>
        <input name="question8" type="radio" id="question8b" value="2" />
        <label for="question8b">Disagree</label>
        <input name="question8" type="radio" id="question8c" value="3" />
        <label for="question8c">Neutral</label>
        <input name="question8" type="radio" id="question8d" value="4" />
        <label for="question8d">Agree</label>
        <input name="question8" type="radio" id="question8e" value="5" />
        <label for="question8e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 9</strong></h5>
        <h5>9) Religious beliefs influence me.</h5>
        <input name="question9" type="radio" id="question9a" value="1" />
        <label for="question9a">Strongly Disagree</label>
        <input name="question9" type="radio" id="question9b" value="2" />
        <label for="question9b">Disagree</label>
        <input name="question9" type="radio" id="question9c" value="3" />
        <label for="question9c">Neutral</label>
        <input name="question9" type="radio" id="question9d" value="4" />
        <label for="question9d">Agree</label>
        <input name="question9" type="radio" id="question9e" value="5" />
        <label for="question9e">Strongly Agree</label>
        
        <br>
        <br>

        <h5><strong>Question 10</strong></h5>
        <h5>10) I am interested in the paranormal.</h5>
        <input name="question10" type="radio" id="question10a" value="1" />
        <label for="question10a">Strongly Disagree</label>
        <input name="question10" type="radio" id="question10b" value="2" />
        <label for="question10b">Disagree</label>
        <input name="question10" type="radio" id="question10c" value="3" />
        <label for="question10c">Neutral</label>
        <input name="question10" type="radio" id="question10d" value="4" />
        <label for="question10d">Agree</label>
        <input name="question10" type="radio" id="question10e" value="5" />
        <label for="question10e">Strongly Agree</label>

        <br>
        <br>

        <button class="waves-effect waves-light btn" id="submit" type="button">
            Submit
        </button>
        
        <br>
        <br>
        <hr>
        
        <footer class="footer">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/cristytorres21/Friend-Finder">GitHub Repo</a></p>
        </footer>

    </div>

    <!-- Modal -->
    <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title"><strong>Best Match</strong></h3>
                </div>

                <div class="modal-body">
                    <h4 id="matchName"></h4>
                    <img id="matchImg" src="" alt="">
                </div>

                <div class="modal-footer">
                    <button type="button" class="modal-action modal-close waves-effect waves-light btn">Close</button>

                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
      
    $("#submit").on("click", function () {
        // Form validation to check for unanswered questions or empty fields
        function validateForm() {
            var isValid = true;
            $('.form-control').each(function () {
                if ($(this).val() === "")
                    isValid = false;
            });
            for (var i = 1; i <= 10; i++) {
                if ($("input:radio[name=question" + i + "]:checked").val() == null) {
                    isValid = false;
                };
            };
            return isValid;

        }
        if (validateForm() == true) {

            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [
                    $('input:radio[name="question1"]:checked').val(), 
                    $('input:radio[name="question2"]:checked').val(),
                    $('input:radio[name="question3"]:checked').val(),
                    $('input:radio[name="question4"]:checked').val(),
                    $('input:radio[name="question5"]:checked').val(),
                    $('input:radio[name="question6"]:checked').val(),
                    $('input:radio[name="question7"]:checked').val(),
                    $('input:radio[name="question8"]:checked').val(),
                    $('input:radio[name="question9"]:checked').val(),
                    $('input:radio[name="question10"]:checked').val()]
            };

            // Grab the URL of the website
            var currentURL = window.location.origin;

            $.post(currentURL + '/api/friends', userData, function(data) {
                $('#matchName').text(data.name);
                $('#matchImg').attr({src: data.photo, class: "responsive-img circle"});
                $('#resultsModal').openModal();
            });
        }
        else {
            alert('Fill out all fields before submitting!');
        }
        return false;
    });

    </script>

</body>

</html>